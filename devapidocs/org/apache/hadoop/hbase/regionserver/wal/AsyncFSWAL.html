<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AsyncFSWAL (Apache HBase 2.0.0-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AsyncFSWAL (Apache HBase 2.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncFSWAL.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractProtobufLogWriter.html" title="class in org.apache.hadoop.hbase.regionserver.wal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.LogRollerExitedChecker.html" title="class in org.apache.hadoop.hbase.regionserver.wal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html" target="_top">Frames</a></li>
<li><a href="AsyncFSWAL.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hbase.regionserver.wal</div>
<h2 title="Class AsyncFSWAL" class="title">Class AsyncFSWAL</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">org.apache.hadoop.hbase.regionserver.wal.AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hbase.regionserver.wal.AsyncFSWAL</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a></dd>
</dl>
<hr>
<br>
<pre><a href="../../../../../../org/apache/hadoop/hbase/classification/InterfaceAudience.LimitedPrivate.html" title="annotation in org.apache.hadoop.hbase.classification">@InterfaceAudience.LimitedPrivate</a>(<a href="../../../../../../org/apache/hadoop/hbase/classification/InterfaceAudience.LimitedPrivate.html#value()">value</a>="Configuration")
public class <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.131">AsyncFSWAL</a>
extends <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</pre>
<div class="block">An asynchronous implementation of FSWAL.
 <p>
 Here 'waitingConsumePayloads' acts as the RingBuffer in FSHLog. We do not use RingBuffer here
 because RingBuffer need an exclusive thread to consume the entries in it, and here we want to run
 the append and sync operation inside EventLoop. We can not use EventLoop as the RingBuffer's
 executor otherwise the EventLoop can not process any other events such as socket read and write.
 <p>
 For append, we process it as follow:
 <ol>
 <li>In the caller thread(typically, in the rpc handler thread):
 <ol>
 <li>Lock 'waitingConsumePayloads', bump nextTxid, and insert the entry to
 'waitingConsumePayloads'.</li>
 <li>Schedule the consumer task if needed. See <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#shouldScheduleConsumer()"><code>shouldScheduleConsumer()</code></a> for more details.
 </li>
 </ol>
 </li>
 <li>In the consumer task(in the EventLoop thread)
 <ol>
 <li>Poll the entry from 'waitingConsumePayloads' and insert it into 'waitingAppendEntries'</li>
 <li>Poll the entry from 'waitingAppendEntries', append it to the AsyncWriter, and insert it into
 'unackedEntries'</li>
 <li>If the buffered size reaches <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#batchSize"><code>batchSize</code></a>, or there is a sync request, then we call
 sync on the AsyncWriter.</li>
 <li>In the callback methods(CompletionHandler):
 <ul>
 <li>If succeeded, poll the entry from 'unackedEntries' and drop it.</li>
 <li>If failed, add all the entries in 'unackedEntries' back to 'waitingAppendEntries' and wait
 for writing them again.</li>
 </ul>
 </li>
 </ol>
 </li>
 </ol>
 For sync, the processing stages are almost same except that if it is not assigned with a new
 'txid', we just assign the previous 'txid' to it without bumping the 'nextTxid'. And different
 from FSHLog, we will open a new writer and rewrite unacked entries to the new writer and sync
 again if we hit a sync error.
 <p>
 Here we only describe the logic of doReplaceWriter. The main logic of rollWriter is same with
 FSHLog.<br>
 For a normal roll request(for example, we have reached the log roll size):
 <ol>
 <li>In the log roller thread, we add a roll payload to 'waitingConsumePayloads', and then wait on
 the rollPromise(see <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#waitForSafePoint()"><code>waitForSafePoint()</code></a>).</li>
 <li>In the consumer thread, we will stop polling entries from 'waitingConsumePayloads' if we hit
 a Payload which contains a roll request.</li>
 <li>Append all entries to current writer, issue a sync request if possible.</li>
 <li>If sync succeeded, check if we could finish a roll request. There 3 conditions:
 <ul>
 <li>'rollPromise' is not null which means we have a pending roll request.</li>
 <li>'waitingAppendEntries' is empty.</li>
 <li>'unackedEntries' is empty.</li>
 </ul>
 </li>
 <li>Back to the log roller thread, now we can confirm that there are no out-going entries, i.e.,
 we reach a safe point. So it is safe to replace old writer with new writer now.</li>
 <li>Acquire 'waitingConsumePayloads' lock, set 'writerBroken' and 'waitingRoll' to false, cancel
 log roller exit checker if any(see the comments in the 'failed' method of the sync
 CompletionHandler to see why we need a checker here).</li>
 <li>Schedule the consumer task if needed.</li>
 <li>Schedule a background task to close the old writer.</li>
 </ol>
 For a broken writer roll request, the only difference is that we can bypass the wait for safe
 point stage. See the comments in the 'failed' method of the sync CompletionHandler for more
 details.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.LogRollerExitedChecker.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AsyncFSWAL.LogRollerExitedChecker</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.Payload.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AsyncFSWAL.Payload</a></strong></code>
<div class="block">Carry things that we want to pass to the consume task in event loop.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.hadoop.hbase.wal.WAL">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.hadoop.hbase.wal.<a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.Entry.html" title="class in org.apache.hadoop.hbase.wal">WAL.Entry</a>, <a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.Reader.html" title="interface in org.apache.hadoop.hbase.wal">WAL.Reader</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#ASYNC_WAL_CREATE_MAX_RETRIES">ASYNC_WAL_CREATE_MAX_RETRIES</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS">ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#batchSize">batchSize</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#closeExecutor">closeExecutor</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#consumer">consumer</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#consumerScheduled">consumerScheduled</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#createMaxRetries">createMaxRetries</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#DEFAULT_ASYNC_WAL_CREATE_MAX_RETRIES">DEFAULT_ASYNC_WAL_CREATE_MAX_RETRIES</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#DEFAULT_ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS">DEFAULT_ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#DEFAULT_WAL_BATCH_SIZE">DEFAULT_WAL_BATCH_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private io.netty.channel.EventLoop</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#eventLoop">eventLoop</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#fileLengthAtLastSync">fileLengthAtLastSync</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hbase/util/FanOutOneBlockAsyncDFSOutput.html" title="class in org.apache.hadoop.hbase.util">FanOutOneBlockAsyncDFSOutput</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#hdfsOut">hdfsOut</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#highestProcessedTxid">highestProcessedTxid</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#logRollerExited">logRollerExited</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.LogRollerExitedChecker.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AsyncFSWAL.LogRollerExitedChecker</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#logRollerExitedChecker">logRollerExitedChecker</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#logRollerExitedCheckIntervalMs">logRollerExitedCheckIntervalMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#nextTxid">nextTxid</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private io.netty.util.concurrent.Promise&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#rollPromise">rollPromise</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/SyncFuture.html" title="class in org.apache.hadoop.hbase.regionserver.wal">SyncFuture</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#SEQ_COMPARATOR">SEQ_COMPARATOR</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html?is-external=true" title="class or interface in java.util">PriorityQueue</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/SyncFuture.html" title="class in org.apache.hadoop.hbase.regionserver.wal">SyncFuture</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#syncFutures">syncFutures</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html?is-external=true" title="class or interface in java.util">Deque</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FSWALEntry</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#unackedEntries">unackedEntries</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html?is-external=true" title="class or interface in java.util">Deque</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FSWALEntry</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#waitingAppendEntries">waitingAppendEntries</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html?is-external=true" title="class or interface in java.util">Deque</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.Payload.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AsyncFSWAL.Payload</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#waitingConsumePayloads">waitingConsumePayloads</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#waitingRoll">waitingRoll</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#WAL_BATCH_SIZE">WAL_BATCH_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#writerBroken">writerBroken</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.hadoop.hbase.regionserver.wal.AbstractFSWAL">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.hadoop.hbase.regionserver.wal.<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#byWalRegionSequenceIds">byWalRegionSequenceIds</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#closeBarrier">closeBarrier</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#closed">closed</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#conf">conf</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#coprocessorHost">coprocessorHost</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#DEFAULT_SLOW_SYNC_TIME_MS">DEFAULT_SLOW_SYNC_TIME_MS</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#filenum">filenum</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#fs">fs</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#highestSyncedTxid">highestSyncedTxid</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#highestUnsyncedTxid">highestUnsyncedTxid</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#listeners">listeners</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#LOG_NAME_COMPARATOR">LOG_NAME_COMPARATOR</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#logrollsize">logrollsize</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#maxLogs">maxLogs</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#numEntries">numEntries</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#ourFiles">ourFiles</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#prefixPathStr">prefixPathStr</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#rollWriterLock">rollWriterLock</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#sequenceIdAccounting">sequenceIdAccounting</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#shutdown">shutdown</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#slowSyncNs">slowSyncNs</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#totalLogSize">totalLogSize</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#walArchiveDir">walArchiveDir</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#walDir">walDir</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#walFilePrefix">walFilePrefix</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#walFileSuffix">walFileSuffix</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#writer">writer</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#AsyncFSWAL(org.apache.hadoop.fs.FileSystem,%20org.apache.hadoop.fs.Path,%20java.lang.String,%20java.lang.String,%20org.apache.hadoop.conf.Configuration,%20java.util.List,%20boolean,%20java.lang.String,%20java.lang.String,%20io.netty.channel.EventLoop)">AsyncFSWAL</a></strong>(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                    org.apache.hadoop.fs.Path&nbsp;rootDir,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;logDir,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;archiveDir,
                    org.apache.hadoop.conf.Configuration&nbsp;conf,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/WALActionsListener.html" title="interface in org.apache.hadoop.hbase.regionserver.wal">WALActionsListener</a>&gt;&nbsp;listeners,
                    boolean&nbsp;failIfWALExists,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;prefix,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;suffix,
                    io.netty.channel.EventLoop&nbsp;eventLoop)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#addTimeAnnotation(org.apache.hadoop.hbase.regionserver.wal.SyncFuture,%20java.lang.String)">addTimeAnnotation</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/SyncFuture.html" title="class in org.apache.hadoop.hbase.regionserver.wal">SyncFuture</a>&nbsp;future,
                                  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;annotation)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#append(org.apache.hadoop.hbase.HRegionInfo,%20org.apache.hadoop.hbase.wal.WALKey,%20org.apache.hadoop.hbase.regionserver.wal.WALEdit,%20boolean)">append</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/HRegionInfo.html" title="class in org.apache.hadoop.hbase">HRegionInfo</a>&nbsp;hri,
            <a href="../../../../../../org/apache/hadoop/hbase/wal/WALKey.html" title="class in org.apache.hadoop.hbase.wal">WALKey</a>&nbsp;key,
            <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/WALEdit.html" title="class in org.apache.hadoop.hbase.regionserver.wal">WALEdit</a>&nbsp;edits,
            boolean&nbsp;inMemstore)</code>
<div class="block">NOTE: This append, at a time that is usually after this call returns, starts an mvcc
 transaction by calling 'begin' wherein which we assign this update a sequenceid.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#consume()">consume</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#createWriterInstance(org.apache.hadoop.fs.Path)">createWriterInstance</a></strong>(org.apache.hadoop.fs.Path&nbsp;path)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#doAppend(org.apache.hadoop.hbase.wal.WALProvider.AsyncWriter,%20org.apache.hadoop.hbase.regionserver.wal.FSWALEntry)">doAppend</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&nbsp;writer,
                <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FSWALEntry</a>&nbsp;entry)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#doReplaceWriter(org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.Path,%20org.apache.hadoop.hbase.wal.WALProvider.AsyncWriter)">doReplaceWriter</a></strong>(org.apache.hadoop.fs.Path&nbsp;oldPath,
                              org.apache.hadoop.fs.Path&nbsp;newPath,
                              <a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&nbsp;nextWriter)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#doShutdown()">doShutdown</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#finishSync(boolean)">finishSync</a></strong>(boolean&nbsp;addSyncTrace)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#getLogReplication()">getLogReplication</a></strong>()</code>
<div class="block">This method gets the datanode replication count for the current WAL.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) org.apache.hadoop.hdfs.protocol.DatanodeInfo[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#getPipeline()">getPipeline</a></strong>()</code>
<div class="block">This method gets the pipeline for the current WAL.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#logRollerExited()">logRollerExited</a></strong>()</code>
<div class="block">In some WAL implementation, we will write WAL entries to new file if sync failed, which means,
 the fail recovery is depended on log roller.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#shouldScheduleConsumer()">shouldScheduleConsumer</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#sync()">sync</a></strong>()</code>
<div class="block">Sync what we have in the WAL.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#sync(long)">sync</a></strong>(long&nbsp;txid)</code>
<div class="block">Sync the WAL if the txId was not already sync'd.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#sync(org.apache.hadoop.hbase.wal.WALProvider.AsyncWriter,%20long)">sync</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&nbsp;writer,
        long&nbsp;processedTxid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#tryFinishRoll()">tryFinishRoll</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#waitForSafePoint()">waitForSafePoint</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hbase.regionserver.wal.AbstractFSWAL">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hbase.regionserver.wal.<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#abortCacheFlush(byte[])">abortCacheFlush</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#append(W,%20org.apache.hadoop.hbase.regionserver.wal.FSWALEntry)">append</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#atHeadOfRingBufferEventHandlerAppend()">atHeadOfRingBufferEventHandlerAppend</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#blockOnSync(org.apache.hadoop.hbase.regionserver.wal.SyncFuture)">blockOnSync</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#close()">close</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#completeCacheFlush(byte[])">completeCacheFlush</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#computeFilename(long)">computeFilename</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#findRegionsToForceFlush()">findRegionsToForceFlush</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getCoprocessorHost()">getCoprocessorHost</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getCurrentFileName()">getCurrentFileName</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getEarliestMemstoreSeqNum(byte[])">getEarliestMemstoreSeqNum</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getEarliestMemstoreSeqNum(byte[],%20byte[])">getEarliestMemstoreSeqNum</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getFileNumFromFileName(org.apache.hadoop.fs.Path)">getFileNumFromFileName</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getFiles()">getFiles</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getLogFileSize()">getLogFileSize</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getNumLogFiles()">getNumLogFiles</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getNumRolledLogFiles()">getNumRolledLogFiles</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getOldPath()">getOldPath</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getSyncFuture(long,%20org.apache.htrace.Span)">getSyncFuture</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getUnflushedEntriesCount()">getUnflushedEntriesCount</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getWALArchivePath(org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.Path)">getWALArchivePath</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#isUnflushedEntries()">isUnflushedEntries</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#postSync(long,%20int)">postSync</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#registerWALActionsListener(org.apache.hadoop.hbase.regionserver.wal.WALActionsListener)">registerWALActionsListener</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#replaceWriter(org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.Path,%20W)">replaceWriter</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#requestLogRoll()">requestLogRoll</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#requestLogRoll(boolean)">requestLogRoll</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#rollWriter()">rollWriter</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#rollWriter(boolean)">rollWriter</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#shutdown()">shutdown</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#startCacheFlush(byte[],%20java.util.Set)">startCacheFlush</a>, <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#unregisterWALActionsListener(org.apache.hadoop.hbase.regionserver.wal.WALActionsListener)">unregisterWALActionsListener</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hbase.wal.WAL">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.hadoop.hbase.wal.<a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html#toString()">toString</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>private static final&nbsp;org.apache.commons.logging.Log <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.133">LOG</a></pre>
</li>
</ul>
<a name="WAL_BATCH_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WAL_BATCH_SIZE</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.135">WAL_BATCH_SIZE</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.regionserver.wal.AsyncFSWAL.WAL_BATCH_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_WAL_BATCH_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_WAL_BATCH_SIZE</h4>
<pre>public static final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.136">DEFAULT_WAL_BATCH_SIZE</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.regionserver.wal.AsyncFSWAL.DEFAULT_WAL_BATCH_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ASYNC_WAL_CREATE_MAX_RETRIES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ASYNC_WAL_CREATE_MAX_RETRIES</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.138">ASYNC_WAL_CREATE_MAX_RETRIES</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.regionserver.wal.AsyncFSWAL.ASYNC_WAL_CREATE_MAX_RETRIES">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_ASYNC_WAL_CREATE_MAX_RETRIES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_ASYNC_WAL_CREATE_MAX_RETRIES</h4>
<pre>public static final&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.139">DEFAULT_ASYNC_WAL_CREATE_MAX_RETRIES</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.regionserver.wal.AsyncFSWAL.DEFAULT_ASYNC_WAL_CREATE_MAX_RETRIES">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.141">ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.regionserver.wal.AsyncFSWAL.ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS</h4>
<pre>public static final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.143">DEFAULT_ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.regionserver.wal.AsyncFSWAL.DEFAULT_ASYNC_WAL_LOG_ROLLER_EXITED_CHECK_INTERVAL_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="eventLoop">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>eventLoop</h4>
<pre>private final&nbsp;io.netty.channel.EventLoop <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.186">eventLoop</a></pre>
</li>
</ul>
<a name="waitingConsumePayloads">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitingConsumePayloads</h4>
<pre>private final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html?is-external=true" title="class or interface in java.util">Deque</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.Payload.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AsyncFSWAL.Payload</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.188">waitingConsumePayloads</a></pre>
</li>
</ul>
<a name="nextTxid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextTxid</h4>
<pre>private&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.192">nextTxid</a></pre>
</li>
</ul>
<a name="consumerScheduled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>consumerScheduled</h4>
<pre>private&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.194">consumerScheduled</a></pre>
</li>
</ul>
<a name="waitingRoll">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitingRoll</h4>
<pre>private&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.197">waitingRoll</a></pre>
</li>
</ul>
<a name="writerBroken">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writerBroken</h4>
<pre>private&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.200">writerBroken</a></pre>
</li>
</ul>
<a name="batchSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batchSize</h4>
<pre>private final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.202">batchSize</a></pre>
</li>
</ul>
<a name="createMaxRetries">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createMaxRetries</h4>
<pre>private final&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.204">createMaxRetries</a></pre>
</li>
</ul>
<a name="logRollerExitedCheckIntervalMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRollerExitedCheckIntervalMs</h4>
<pre>private final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.206">logRollerExitedCheckIntervalMs</a></pre>
</li>
</ul>
<a name="closeExecutor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeExecutor</h4>
<pre>private final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.208">closeExecutor</a></pre>
</li>
</ul>
<a name="hdfsOut">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hdfsOut</h4>
<pre>private volatile&nbsp;<a href="../../../../../../org/apache/hadoop/hbase/util/FanOutOneBlockAsyncDFSOutput.html" title="class in org.apache.hadoop.hbase.util">FanOutOneBlockAsyncDFSOutput</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.212">hdfsOut</a></pre>
</li>
</ul>
<a name="waitingAppendEntries">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitingAppendEntries</h4>
<pre>private final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html?is-external=true" title="class or interface in java.util">Deque</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FSWALEntry</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.214">waitingAppendEntries</a></pre>
</li>
</ul>
<a name="unackedEntries">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unackedEntries</h4>
<pre>private final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html?is-external=true" title="class or interface in java.util">Deque</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FSWALEntry</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.216">unackedEntries</a></pre>
</li>
</ul>
<a name="syncFutures">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>syncFutures</h4>
<pre>private final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html?is-external=true" title="class or interface in java.util">PriorityQueue</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/SyncFuture.html" title="class in org.apache.hadoop.hbase.regionserver.wal">SyncFuture</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.218">syncFutures</a></pre>
</li>
</ul>
<a name="rollPromise">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollPromise</h4>
<pre>private&nbsp;io.netty.util.concurrent.Promise&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.221">rollPromise</a></pre>
</li>
</ul>
<a name="highestProcessedTxid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>highestProcessedTxid</h4>
<pre>private&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.224">highestProcessedTxid</a></pre>
</li>
</ul>
<a name="fileLengthAtLastSync">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileLengthAtLastSync</h4>
<pre>private&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.227">fileLengthAtLastSync</a></pre>
</li>
</ul>
<a name="logRollerExited">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRollerExited</h4>
<pre>private volatile&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.229">logRollerExited</a></pre>
</li>
</ul>
<a name="logRollerExitedChecker">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRollerExitedChecker</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.LogRollerExitedChecker.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AsyncFSWAL.LogRollerExitedChecker</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.283">logRollerExitedChecker</a></pre>
</li>
</ul>
<a name="SEQ_COMPARATOR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SEQ_COMPARATOR</h4>
<pre>private static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/SyncFuture.html" title="class in org.apache.hadoop.hbase.regionserver.wal">SyncFuture</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.459">SEQ_COMPARATOR</a></pre>
</li>
</ul>
<a name="consumer">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>consumer</h4>
<pre>private final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.468">consumer</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AsyncFSWAL(org.apache.hadoop.fs.FileSystem, org.apache.hadoop.fs.Path, java.lang.String, java.lang.String, org.apache.hadoop.conf.Configuration, java.util.List, boolean, java.lang.String, java.lang.String, io.netty.channel.EventLoop)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AsyncFSWAL</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.285">AsyncFSWAL</a>(org.apache.hadoop.fs.FileSystem&nbsp;fs,
          org.apache.hadoop.fs.Path&nbsp;rootDir,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;logDir,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;archiveDir,
          org.apache.hadoop.conf.Configuration&nbsp;conf,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/WALActionsListener.html" title="interface in org.apache.hadoop.hbase.regionserver.wal">WALActionsListener</a>&gt;&nbsp;listeners,
          boolean&nbsp;failIfWALExists,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;prefix,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;suffix,
          io.netty.channel.EventLoop&nbsp;eventLoop)
           throws <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FailedLogCloseException.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FailedLogCloseException</a>,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FailedLogCloseException.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FailedLogCloseException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="tryFinishRoll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryFinishRoll</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.302">tryFinishRoll</a>()</pre>
</li>
</ul>
<a name="sync(org.apache.hadoop.hbase.wal.WALProvider.AsyncWriter, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.312">sync</a>(<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&nbsp;writer,
        long&nbsp;processedTxid)</pre>
</li>
</ul>
<a name="addTimeAnnotation(org.apache.hadoop.hbase.regionserver.wal.SyncFuture, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTimeAnnotation</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.390">addTimeAnnotation</a>(<a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/SyncFuture.html" title="class in org.apache.hadoop.hbase.regionserver.wal">SyncFuture</a>&nbsp;future,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;annotation)</pre>
</li>
</ul>
<a name="finishSync(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishSync</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.396">finishSync</a>(boolean&nbsp;addSyncTrace)</pre>
</li>
</ul>
<a name="consume()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>consume</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.412">consume</a>()</pre>
</li>
</ul>
<a name="shouldScheduleConsumer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldScheduleConsumer</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.520">shouldScheduleConsumer</a>()</pre>
</li>
</ul>
<a name="append(org.apache.hadoop.hbase.HRegionInfo, org.apache.hadoop.hbase.wal.WALKey, org.apache.hadoop.hbase.regionserver.wal.WALEdit, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.532">append</a>(<a href="../../../../../../org/apache/hadoop/hbase/HRegionInfo.html" title="class in org.apache.hadoop.hbase">HRegionInfo</a>&nbsp;hri,
          <a href="../../../../../../org/apache/hadoop/hbase/wal/WALKey.html" title="class in org.apache.hadoop.hbase.wal">WALKey</a>&nbsp;key,
          <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/WALEdit.html" title="class in org.apache.hadoop.hbase.regionserver.wal">WALEdit</a>&nbsp;edits,
          boolean&nbsp;inMemstore)
            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#append(org.apache.hadoop.hbase.HRegionInfo,%20org.apache.hadoop.hbase.wal.WALKey,%20org.apache.hadoop.hbase.regionserver.wal.WALEdit,%20boolean)">AbstractFSWAL</a></code></strong></div>
<div class="block">NOTE: This append, at a time that is usually after this call returns, starts an mvcc
 transaction by calling 'begin' wherein which we assign this update a sequenceid. At assignment
 time, we stamp all the passed in Cells inside WALEdit with their sequenceId. You must
 'complete' the transaction this mvcc transaction by calling
 MultiVersionConcurrencyControl#complete(...) or a variant otherwise mvcc will get stuck. Do it
 in the finally of a try/finally block within which this append lives and any subsequent
 operations like sync or update of memstore, etc. Get the WriteEntry to pass mvcc out of the
 passed in WALKey <code>walKey</code> parameter. Be warned that the WriteEntry is not
 immediately available on return from this method. It WILL be available subsequent to a sync of
 this append; otherwise, you will just have to wait on the WriteEntry to get filled in.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html#append(org.apache.hadoop.hbase.HRegionInfo,%20org.apache.hadoop.hbase.wal.WALKey,%20org.apache.hadoop.hbase.regionserver.wal.WALEdit,%20boolean)">append</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#append(org.apache.hadoop.hbase.HRegionInfo,%20org.apache.hadoop.hbase.wal.WALKey,%20org.apache.hadoop.hbase.regionserver.wal.WALEdit,%20boolean)">append</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>hri</code> - the regioninfo associated with append</dd><dd><code>key</code> - Modified by this call; we add to it this edits region edit/sequence id.</dd><dd><code>edits</code> - Edits to append. MAY CONTAIN NO EDITS for case where we want to get an edit
 sequence id that is after all currently appended edits.</dd><dd><code>inMemstore</code> - Always true except for case where we are writing a compaction completion
 record into the WAL; in this case the entry is just so we can finish an unfinished compaction
 -- it is not an edit for memstore.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns a 'transaction id' and <code>key</code> will have the region edit/sequence id
 in it.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="sync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.552">sync</a>()
          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html#sync()">WAL</a></code></strong></div>
<div class="block">Sync what we have in the WAL.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="sync(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.573">sync</a>(long&nbsp;txid)
          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html#sync(long)">WAL</a></code></strong></div>
<div class="block">Sync the WAL if the txId was not already sync'd.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>txid</code> - Transaction id to sync to.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="logRollerExited()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRollerExited</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.596">logRollerExited</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/wal/WAL.html#logRollerExited()">WAL</a></code></strong></div>
<div class="block">In some WAL implementation, we will write WAL entries to new file if sync failed, which means,
 the fail recovery is depended on log roller. So here we tell the WAL that log roller has
 already been exited so the WAL cloud give up recovery.</div>
</li>
</ul>
<a name="createWriterInstance(org.apache.hadoop.fs.Path)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createWriterInstance</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.601">createWriterInstance</a>(org.apache.hadoop.fs.Path&nbsp;path)
                                                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#createWriterInstance(org.apache.hadoop.fs.Path)">createWriterInstance</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="waitForSafePoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForSafePoint</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.635">waitForSafePoint</a>()</pre>
</li>
</ul>
<a name="doReplaceWriter(org.apache.hadoop.fs.Path, org.apache.hadoop.fs.Path, org.apache.hadoop.hbase.wal.WALProvider.AsyncWriter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doReplaceWriter</h4>
<pre>protected&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.660">doReplaceWriter</a>(org.apache.hadoop.fs.Path&nbsp;oldPath,
                   org.apache.hadoop.fs.Path&nbsp;newPath,
                   <a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&nbsp;nextWriter)
                        throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#doReplaceWriter(org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.Path,%20W)">doReplaceWriter</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>old wal file size</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doShutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doShutdown</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.710">doShutdown</a>()
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#doShutdown()">doShutdown</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doAppend(org.apache.hadoop.hbase.wal.WALProvider.AsyncWriter, org.apache.hadoop.hbase.regionserver.wal.FSWALEntry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doAppend</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.718">doAppend</a>(<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&nbsp;writer,
            <a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.html" title="class in org.apache.hadoop.hbase.regionserver.wal">FSWALEntry</a>&nbsp;entry)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#doAppend(W,%20org.apache.hadoop.hbase.regionserver.wal.FSWALEntry)">doAppend</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getPipeline()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPipeline</h4>
<pre>org.apache.hadoop.hdfs.protocol.DatanodeInfo[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.723">getPipeline</a>()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getPipeline()">AbstractFSWAL</a></code></strong></div>
<div class="block">This method gets the pipeline for the current WAL.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getPipeline()">getPipeline</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getLogReplication()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getLogReplication</h4>
<pre>int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html#line.729">getLogReplication</a>()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getLogReplication()">AbstractFSWAL</a></code></strong></div>
<div class="block">This method gets the datanode replication count for the current WAL.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html#getLogReplication()">getLogReplication</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/wal/WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>&gt;</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncFSWAL.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AbstractProtobufLogWriter.html" title="class in org.apache.hadoop.hbase.regionserver.wal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.LogRollerExitedChecker.html" title="class in org.apache.hadoop.hbase.regionserver.wal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hbase/regionserver/wal/AsyncFSWAL.html" target="_top">Frames</a></li>
<li><a href="AsyncFSWAL.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2007&#x2013;2016 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
