<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>TestHFileBlockCompatibility.Writer (Apache HBase 2.0.0-SNAPSHOT Test API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TestHFileBlockCompatibility.Writer (Apache HBase 2.0.0-SNAPSHOT Test API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TestHFileBlockCompatibility.Writer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.html" title="class in org.apache.hadoop.hbase.io.hfile"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.State.html" title="enum in org.apache.hadoop.hbase.io.hfile"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html" target="_top">Frames</a></li>
<li><a href="TestHFileBlockCompatibility.Writer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hbase.io.hfile</div>
<h2 title="Class TestHFileBlockCompatibility.Writer" class="title">Class TestHFileBlockCompatibility.Writer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hbase.io.hfile.TestHFileBlockCompatibility.Writer</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.html" title="class in org.apache.hadoop.hbase.io.hfile">TestHFileBlockCompatibility</a></dd>
</dl>
<hr>
<br>
<pre>public static final class <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.html#line.345">TestHFileBlockCompatibility.Writer</a>
extends org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</pre>
<div class="block">This is the version of the HFileBlock.Writer that is used to
 create V2 blocks with minor version 0. These blocks do not
 have hbase-level checksums. The code is here to test
 backward compatibility. The reason we do not inherit from
 HFileBlock.Writer is because we never ever want to change the code
 in this class but the code in HFileBlock.Writer will continually
 evolve.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.State.html" title="enum in org.apache.hadoop.hbase.io.hfile">TestHFileBlockCompatibility.Writer.State</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</h3>
<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer.BufferGrabbingByteArrayOutputStream</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html?is-external=true" title="class or interface in java.io">ByteArrayOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#baosInMemory">baosInMemory</a></strong></code>
<div class="block">The stream we use to accumulate data in uncompressed format for each
 block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.hbase.io.hfile.BlockType</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#blockType">blockType</a></strong></code>
<div class="block">Current block type.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.hbase.io.compress.Compression.Algorithm</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#compressAlgo">compressAlgo</a></strong></code>
<div class="block">Compression algorithm for all blocks this instance writes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.io.compress.Compressor</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#compressor">compressor</a></strong></code>
<div class="block">Compressor, which is also reused between consecutive blocks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#dataBlockEncoder">dataBlockEncoder</a></strong></code>
<div class="block">Data block encoder used for data blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.hbase.io.encoding.HFileBlockEncodingContext</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#dataBlockEncodingCtx">dataBlockEncodingCtx</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.hbase.io.encoding.HFileBlockDefaultEncodingContext</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#defaultBlockEncodingCtx">defaultBlockEncodingCtx</a></strong></code>
<div class="block">block encoding context for non-data blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#DONT_FILL_HEADER">DONT_FILL_HEADER</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#DUMMY_HEADER">DUMMY_HEADER</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#HEADER_SIZE">HEADER_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#onDiskBytesWithHeader">onDiskBytesWithHeader</a></strong></code>
<div class="block">Bytes to be written to the file system, including the header.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#prevOffset">prevOffset</a></strong></code>
<div class="block">The offset of the previous block of the same type</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#prevOffsetByType">prevOffsetByType</a></strong></code>
<div class="block">Offset of previous block by block type.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#startOffset">startOffset</a></strong></code>
<div class="block">Current block's start offset in the <code>HFile</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.State.html" title="enum in org.apache.hadoop.hbase.io.hfile">TestHFileBlockCompatibility.Writer.State</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#state">state</a></strong></code>
<div class="block">Writer state.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#uncompressedBytesWithHeader">uncompressedBytesWithHeader</a></strong></code>
<div class="block">Valid in the READY state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#unencodedDataSizeWritten">unencodedDataSizeWritten</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#userDataStream">userDataStream</a></strong></code>
<div class="block">A stream that we write uncompressed bytes to, which compresses them and
 writes them to <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#baosInMemory"><code>baosInMemory</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#TestHFileBlockCompatibility.Writer(org.apache.hadoop.hbase.io.compress.Compression.Algorithm,%20org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder,%20boolean,%20boolean)">TestHFileBlockCompatibility.Writer</a></strong>(org.apache.hadoop.hbase.io.compress.Compression.Algorithm&nbsp;compressionAlgorithm,
                                                                    org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder&nbsp;dataBlockEncoder,
                                                                    boolean&nbsp;includesMemstoreTS,
                                                                    boolean&nbsp;includesTag)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#TestHFileBlockCompatibility.Writer(org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder,%20org.apache.hadoop.hbase.io.hfile.HFileContext)">TestHFileBlockCompatibility.Writer</a></strong>(org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder&nbsp;dataBlockEncoder,
                                                                    org.apache.hadoop.hbase.io.hfile.HFileContext&nbsp;meta)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#blockSizeWritten()">blockSizeWritten</a></strong>()</code>
<div class="block">Returns the number of bytes written into the current block so far, or
 zero if not writing the block at the moment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#ensureBlockReady()">ensureBlockReady</a></strong>()</code>
<div class="block">Transitions the block writer from the "writing" state to the "block
 ready" state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#expectState(org.apache.hadoop.hbase.io.hfile.TestHFileBlockCompatibility.Writer.State)">expectState</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.State.html" title="enum in org.apache.hadoop.hbase.io.hfile">TestHFileBlockCompatibility.Writer.State</a>&nbsp;expectedState)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#finishBlock()">finishBlock</a></strong>()</code>
<div class="block">An internal method that flushes the compressing stream (if using
 compression), serializes the header, and takes care of the separate
 uncompressed stream for caching on write, if applicable.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>org.apache.hadoop.hbase.io.hfile.HFileBlock</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getBlockForCaching()">getBlockForCaching</a></strong>()</code>
<div class="block">Creates a new HFileBlock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getHeaderAndData()">getHeaderAndData</a></strong>()</code>
<div class="block">Returns the header or the compressed data (or uncompressed data when not
 using compression) as a byte array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getOnDiskSizeWithHeader()">getOnDiskSizeWithHeader</a></strong>()</code>
<div class="block">Returns the on-disk size of the block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getOnDiskSizeWithoutHeader()">getOnDiskSizeWithoutHeader</a></strong>()</code>
<div class="block">Returns the on-disk size of the data portion of the block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getUncompressedBufferWithHeader()">getUncompressedBufferWithHeader</a></strong>()</code>
<div class="block">Similar to <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getUncompressedBufferWithHeader()"><code>getUncompressedBufferWithHeader()</code></a> but returns a byte
 buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getUncompressedDataWithHeader()">getUncompressedDataWithHeader</a></strong>()</code>
<div class="block">Returns the header followed by the uncompressed data, even if using
 compression.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getUncompressedSizeWithHeader()">getUncompressedSizeWithHeader</a></strong>()</code>
<div class="block">The uncompressed size of the block data, including header size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getUncompressedSizeWithoutHeader()">getUncompressedSizeWithoutHeader</a></strong>()</code>
<div class="block">The uncompressed size of the block data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getUserDataStream()">getUserDataStream</a></strong>()</code>
<div class="block">Returns the stream for the user to write to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#isWriting()">isWriting</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#putHeader(byte[],%20int,%20int,%20int)">putHeader</a></strong>(byte[]&nbsp;dest,
                  int&nbsp;offset,
                  int&nbsp;onDiskSize,
                  int&nbsp;uncompressedSize)</code>
<div class="block">Put the header into the given byte array at the given offset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#releaseCompressor()">releaseCompressor</a></strong>()</code>
<div class="block">Releases the compressor this writer uses to compress blocks into the
 compressor pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#startWriting(org.apache.hadoop.hbase.io.hfile.BlockType)">startWriting</a></strong>(org.apache.hadoop.hbase.io.hfile.BlockType&nbsp;newBlockType)</code>
<div class="block">Starts writing into the block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#write(org.apache.hadoop.hbase.Cell)">write</a></strong>(org.apache.hadoop.hbase.Cell&nbsp;c)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#writeBlock(org.apache.hadoop.hbase.io.hfile.HFileBlock.BlockWritable,%20org.apache.hadoop.fs.FSDataOutputStream)">writeBlock</a></strong>(org.apache.hadoop.hbase.io.hfile.HFileBlock.BlockWritable&nbsp;bw,
                    org.apache.hadoop.fs.FSDataOutputStream&nbsp;out)</code>
<div class="block">Takes the given <code>HFileBlock.BlockWritable</code> instance, creates a new block of
 its appropriate type, writes the writable into this block, and flushes
 the block into the output stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#writeHeaderAndData(java.io.DataOutputStream)">writeHeaderAndData</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a>&nbsp;out)</code>
<div class="block">Writes the header and the compressed data of this block (or uncompressed
 data when not using compression) into the given stream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#writeHeaderAndData(org.apache.hadoop.fs.FSDataOutputStream)">writeHeaderAndData</a></strong>(org.apache.hadoop.fs.FSDataOutputStream&nbsp;out)</code>
<div class="block">Similar to <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#writeHeaderAndData(org.apache.hadoop.fs.FSDataOutputStream)"><code>writeHeaderAndData(FSDataOutputStream)</code></a>, but records
 the offset of this block so that it can be referenced in the next block
 of the same type.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</h3>
<code>finishBlockAndWriteHeaderAndData, getBlockForCaching, getHeaderAndDataForTest, getOnDiskBufferWithHeader, release</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="HEADER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HEADER_SIZE</h4>
<pre>private static final&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.348">HEADER_SIZE</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.io.hfile.TestHFileBlockCompatibility.Writer.HEADER_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DONT_FILL_HEADER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DONT_FILL_HEADER</h4>
<pre>private static final&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.349">DONT_FILL_HEADER</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hbase.io.hfile.TestHFileBlockCompatibility.Writer.DONT_FILL_HEADER">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DUMMY_HEADER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DUMMY_HEADER</h4>
<pre>private static final&nbsp;byte[] <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.350">DUMMY_HEADER</a></pre>
</li>
</ul>
<a name="state">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.State.html" title="enum in org.apache.hadoop.hbase.io.hfile">TestHFileBlockCompatibility.Writer.State</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.360">state</a></pre>
<div class="block">Writer state. Used to ensure the correct usage protocol.</div>
</li>
</ul>
<a name="compressAlgo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compressAlgo</h4>
<pre>private final&nbsp;org.apache.hadoop.hbase.io.compress.Compression.Algorithm <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.363">compressAlgo</a></pre>
<div class="block">Compression algorithm for all blocks this instance writes.</div>
</li>
</ul>
<a name="dataBlockEncoder">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataBlockEncoder</h4>
<pre>private final&nbsp;org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.366">dataBlockEncoder</a></pre>
<div class="block">Data block encoder used for data blocks</div>
</li>
</ul>
<a name="dataBlockEncodingCtx">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataBlockEncodingCtx</h4>
<pre>private&nbsp;org.apache.hadoop.hbase.io.encoding.HFileBlockEncodingContext <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.368">dataBlockEncodingCtx</a></pre>
</li>
</ul>
<a name="defaultBlockEncodingCtx">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultBlockEncodingCtx</h4>
<pre>private&nbsp;org.apache.hadoop.hbase.io.encoding.HFileBlockDefaultEncodingContext <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.370">defaultBlockEncodingCtx</a></pre>
<div class="block">block encoding context for non-data blocks</div>
</li>
</ul>
<a name="baosInMemory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>baosInMemory</h4>
<pre>private&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html?is-external=true" title="class or interface in java.io">ByteArrayOutputStream</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.378">baosInMemory</a></pre>
<div class="block">The stream we use to accumulate data in uncompressed format for each
 block. We reset this stream at the end of each block and reuse it. The
 header is written as the first <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#HEADER_SIZE"><code>HEADER_SIZE</code></a> bytes into this
 stream.</div>
</li>
</ul>
<a name="compressor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compressor</h4>
<pre>private&nbsp;org.apache.hadoop.io.compress.Compressor <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.381">compressor</a></pre>
<div class="block">Compressor, which is also reused between consecutive blocks.</div>
</li>
</ul>
<a name="blockType">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockType</h4>
<pre>private&nbsp;org.apache.hadoop.hbase.io.hfile.BlockType <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.388">blockType</a></pre>
<div class="block">Current block type. Set in <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#startWriting(org.apache.hadoop.hbase.io.hfile.BlockType)"><code>startWriting(BlockType)</code></a>. Could be
 changed in <code>#encodeDataBlockForDisk()</code> from <code>BlockType.DATA</code>
 to <code>BlockType.ENCODED_DATA</code>.</div>
</li>
</ul>
<a name="userDataStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>userDataStream</h4>
<pre>private&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a> <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.394">userDataStream</a></pre>
<div class="block">A stream that we write uncompressed bytes to, which compresses them and
 writes them to <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#baosInMemory"><code>baosInMemory</code></a>.</div>
</li>
</ul>
<a name="onDiskBytesWithHeader">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDiskBytesWithHeader</h4>
<pre>private&nbsp;byte[] <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.400">onDiskBytesWithHeader</a></pre>
<div class="block">Bytes to be written to the file system, including the header. Compressed
 if compression is turned on.</div>
</li>
</ul>
<a name="uncompressedBytesWithHeader">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uncompressedBytesWithHeader</h4>
<pre>private&nbsp;byte[] <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.407">uncompressedBytesWithHeader</a></pre>
<div class="block">Valid in the READY state. Contains the header and the uncompressed (but
 potentially encoded, if this is a data block) bytes, so the length is
 <code>HFileBlock.uncompressedSizeWithoutHeader</code> + <code>HConstants.HFILEBLOCK_HEADER_SIZE</code>.</div>
</li>
</ul>
<a name="startOffset">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startOffset</h4>
<pre>private&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.413">startOffset</a></pre>
<div class="block">Current block's start offset in the <code>HFile</code>. Set in
 <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#writeHeaderAndData(org.apache.hadoop.fs.FSDataOutputStream)"><code>writeHeaderAndData(FSDataOutputStream)</code></a>.</div>
</li>
</ul>
<a name="prevOffsetByType">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prevOffsetByType</h4>
<pre>private&nbsp;long[] <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.419">prevOffsetByType</a></pre>
<div class="block">Offset of previous block by block type. Updated when the next block is
 started.</div>
</li>
</ul>
<a name="prevOffset">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prevOffset</h4>
<pre>private&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.422">prevOffset</a></pre>
<div class="block">The offset of the previous block of the same type</div>
</li>
</ul>
<a name="unencodedDataSizeWritten">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>unencodedDataSizeWritten</h4>
<pre>private&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.424">unencodedDataSizeWritten</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TestHFileBlockCompatibility.Writer(org.apache.hadoop.hbase.io.compress.Compression.Algorithm, org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TestHFileBlockCompatibility.Writer</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.426">TestHFileBlockCompatibility.Writer</a>(org.apache.hadoop.hbase.io.compress.Compression.Algorithm&nbsp;compressionAlgorithm,
                                  org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder&nbsp;dataBlockEncoder,
                                  boolean&nbsp;includesMemstoreTS,
                                  boolean&nbsp;includesTag)</pre>
</li>
</ul>
<a name="TestHFileBlockCompatibility.Writer(org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder, org.apache.hadoop.hbase.io.hfile.HFileContext)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TestHFileBlockCompatibility.Writer</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.433">TestHFileBlockCompatibility.Writer</a>(org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoder&nbsp;dataBlockEncoder,
                                  org.apache.hadoop.hbase.io.hfile.HFileContext&nbsp;meta)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="startWriting(org.apache.hadoop.hbase.io.hfile.BlockType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startWriting</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.453">startWriting</a>(org.apache.hadoop.hbase.io.hfile.BlockType&nbsp;newBlockType)
                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Starts writing into the block. The previous block's data is discarded.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>startWriting</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the stream the user can write their data into</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="write(org.apache.hadoop.hbase.Cell)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.479">write</a>(org.apache.hadoop.hbase.Cell&nbsp;c)
           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>write</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getUserDataStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserDataStream</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.496">getUserDataStream</a>()</pre>
<div class="block">Returns the stream for the user to write to. The block writer takes care
 of handling compression and buffering for caching on write. Can only be
 called in the "writing" state.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>getUserDataStream</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the data output stream for the user to write to</dd></dl>
</li>
</ul>
<a name="ensureBlockReady()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureBlockReady</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.505">ensureBlockReady</a>()
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Transitions the block writer from the "writing" state to the "block
 ready" state.  Does nothing if a block is already finished.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>ensureBlockReady</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="finishBlock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishBlock</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.522">finishBlock</a>()
           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">An internal method that flushes the compressing stream (if using
 compression), serializes the header, and takes care of the separate
 uncompressed stream for caching on write, if applicable. Sets block
 write state to "block ready".</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="putHeader(byte[], int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putHeader</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.561">putHeader</a>(byte[]&nbsp;dest,
             int&nbsp;offset,
             int&nbsp;onDiskSize,
             int&nbsp;uncompressedSize)</pre>
<div class="block">Put the header into the given byte array at the given offset.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>onDiskSize</code> - size of the block on disk</dd><dd><code>uncompressedSize</code> - size of the block after decompression (but
          before optional data block decoding)</dd></dl>
</li>
</ul>
<a name="writeHeaderAndData(org.apache.hadoop.fs.FSDataOutputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeHeaderAndData</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.577">writeHeaderAndData</a>(org.apache.hadoop.fs.FSDataOutputStream&nbsp;out)
                        throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Similar to <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#writeHeaderAndData(org.apache.hadoop.fs.FSDataOutputStream)"><code>writeHeaderAndData(FSDataOutputStream)</code></a>, but records
 the offset of this block so that it can be referenced in the next block
 of the same type.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>writeHeaderAndData</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="writeHeaderAndData(java.io.DataOutputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeHeaderAndData</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.598">writeHeaderAndData</a>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a>&nbsp;out)
                         throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Writes the header and the compressed data of this block (or uncompressed
 data when not using compression) into the given stream. Can be called in
 the "writing" state or in the "block ready" state. If called in the
 "writing" state, transitions the writer to the "block ready" state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - the output stream to write the</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getHeaderAndData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeaderAndData</h4>
<pre>public&nbsp;byte[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.612">getHeaderAndData</a>()
                        throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns the header or the compressed data (or uncompressed data when not
 using compression) as a byte array. Can be called in the "writing" state
 or in the "block ready" state. If called in the "writing" state,
 transitions the writer to the "block ready" state.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>header and data as they would be stored on disk in a byte array</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="releaseCompressor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseCompressor</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.621">releaseCompressor</a>()</pre>
<div class="block">Releases the compressor this writer uses to compress blocks into the
 compressor pool. Needs to be called before the writer is discarded.</div>
</li>
</ul>
<a name="getOnDiskSizeWithoutHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOnDiskSizeWithoutHeader</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.636">getOnDiskSizeWithoutHeader</a>()</pre>
<div class="block">Returns the on-disk size of the data portion of the block. This is the
 compressed size if compression is enabled. Can only be called in the
 "block ready" state. Header is not compressed, and its size is not
 included in the return value.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>getOnDiskSizeWithoutHeader</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the on-disk size of the block, not including the header.</dd></dl>
</li>
</ul>
<a name="getOnDiskSizeWithHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOnDiskSizeWithHeader</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.648">getOnDiskSizeWithHeader</a>()</pre>
<div class="block">Returns the on-disk size of the block. Can only be called in the
 "block ready" state.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>getOnDiskSizeWithHeader</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the on-disk size of the block ready to be written, including the
         header size</dd></dl>
</li>
</ul>
<a name="getUncompressedSizeWithoutHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUncompressedSizeWithoutHeader</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.656">getUncompressedSizeWithoutHeader</a>()</pre>
<div class="block">The uncompressed size of the block data. Does not include header size.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>getUncompressedSizeWithoutHeader</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
</dl>
</li>
</ul>
<a name="getUncompressedSizeWithHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUncompressedSizeWithHeader</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.664">getUncompressedSizeWithHeader</a>()</pre>
<div class="block">The uncompressed size of the block data, including header size.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>getUncompressedSizeWithHeader</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
</dl>
</li>
</ul>
<a name="isWriting()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWriting</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.670">isWriting</a>()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>isWriting</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true if a block is being written</dd></dl>
</li>
</ul>
<a name="blockSizeWritten()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockSizeWritten</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.681">blockSizeWritten</a>()</pre>
<div class="block">Returns the number of bytes written into the current block so far, or
 zero if not writing the block at the moment. Note that this will return
 zero in the "block ready" state as well.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>blockSizeWritten</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes written</dd></dl>
</li>
</ul>
<a name="getUncompressedDataWithHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUncompressedDataWithHeader</h4>
<pre>private&nbsp;byte[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.694">getUncompressedDataWithHeader</a>()</pre>
<div class="block">Returns the header followed by the uncompressed data, even if using
 compression. This is needed for storing uncompressed blocks in the block
 cache. Can be called in the "writing" state or the "block ready" state.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>uncompressed block bytes for caching on write</dd></dl>
</li>
</ul>
<a name="expectState(org.apache.hadoop.hbase.io.hfile.TestHFileBlockCompatibility.Writer.State)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expectState</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.700">expectState</a>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.State.html" title="enum in org.apache.hadoop.hbase.io.hfile">TestHFileBlockCompatibility.Writer.State</a>&nbsp;expectedState)</pre>
</li>
</ul>
<a name="getUncompressedBufferWithHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUncompressedBufferWithHeader</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.713">getUncompressedBufferWithHeader</a>()</pre>
<div class="block">Similar to <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#getUncompressedBufferWithHeader()"><code>getUncompressedBufferWithHeader()</code></a> but returns a byte
 buffer.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>getUncompressedBufferWithHeader</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>uncompressed block for caching on write in the form of a buffer</dd></dl>
</li>
</ul>
<a name="writeBlock(org.apache.hadoop.hbase.io.hfile.HFileBlock.BlockWritable, org.apache.hadoop.fs.FSDataOutputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeBlock</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.728">writeBlock</a>(org.apache.hadoop.hbase.io.hfile.HFileBlock.BlockWritable&nbsp;bw,
              org.apache.hadoop.fs.FSDataOutputStream&nbsp;out)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Takes the given <code>HFileBlock.BlockWritable</code> instance, creates a new block of
 its appropriate type, writes the writable into this block, and flushes
 the block into the output stream. The writer is instructed not to buffer
 uncompressed bytes for cache-on-write.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>writeBlock</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.hbase.io.hfile.HFileBlock.Writer</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bw</code> - the block-writable object to write as a block</dd><dd><code>out</code> - the file system output stream</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockForCaching()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getBlockForCaching</h4>
<pre>public&nbsp;org.apache.hadoop.hbase.io.hfile.HFileBlock&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html#line.737">getBlockForCaching</a>()</pre>
<div class="block">Creates a new HFileBlock.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TestHFileBlockCompatibility.Writer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.html" title="class in org.apache.hadoop.hbase.io.hfile"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.State.html" title="enum in org.apache.hadoop.hbase.io.hfile"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hbase/io/hfile/TestHFileBlockCompatibility.Writer.html" target="_top">Frames</a></li>
<li><a href="TestHFileBlockCompatibility.Writer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2007&#x2013;2015 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
